class ProductCardLink extends HTMLElement{connectedCallback(){this.addEventListener("click",this.#a)}disconnectedCallback(){this.removeEventListener("click",this.#a)}get productTransitionEnabled(){return"true"===this.getAttribute("data-product-transition")}get featuredMediaUrl(){return this.getAttribute("data-featured-media-url")}#a=t=>{if(t.defaultPrevented)return;if(t.target instanceof Element){let e=t.target.closest('button, input, label, select, [tabindex="1"]');if(e)return}let i=this.querySelector("[data-view-transition-to-main-product]");if(!this.productTransitionEnabled||!(i instanceof HTMLElement))return;let r=i.querySelector('slideshow-slide[aria-hidden="false"] [transitionToProduct="true"]')||i.querySelector('[transitionToProduct="true"]:last-child');r instanceof HTMLImageElement&&this.#b(r),i.setAttribute("data-view-transition-type","product-image-transition"),i.setAttribute("data-view-transition-triggered","true")};#b(t){if(!this.featuredMediaUrl)return;let e=new URL(t.currentSrc),i=e.host+e.pathname;if(!this.featuredMediaUrl.includes(i)){let r=t.animate([{opacity:.8},{opacity:1}],{duration:125,easing:"ease-in-out"});r.onfinish=()=>{t.srcset=this.featuredMediaUrl??""}}}}customElements.get("product-card-link")||customElements.define("product-card-link",ProductCardLink);