import{calculateHeaderGroupHeight}from"@theme/critical";import{Component}from"@theme/component";import{onDocumentLoaded,changeMetaThemeColor}from"@theme/utilities";class HeaderComponent extends Component{requiredRefs=["headerDrawerContainer","headerMenu","headerRowTop"];#e=null;#t=null;#i=!1;#s=0;#n=null;#o=150;#r=new ResizeObserver((([e])=>{if(!e)return;const{height:t}=e.target.getBoundingClientRect();document.body.style.setProperty("--header-height",`${t}px`),this.#e&&window.innerWidth>this.#e&&this.#a(!1)}));#c=(e=!0)=>{if(this.#t)return;const t={threshold:e?1:0};this.#t=new IntersectionObserver((([t])=>{if(!t)return;const{isIntersecting:i}=t;e?(this.dataset.stickyState=i?"inactive":"active",changeMetaThemeColor(this.refs.headerRowTop)):this.#i=!i||"active"===this.dataset.stickyState}),t),this.#t.observe(this)};#d=e=>{this.#a(e.detail.minimumReached)};#a(e){e?(this.refs.headerDrawerContainer.classList.remove("desktop:hidden"),this.#e=window.innerWidth,this.refs.headerMenu.classList.add("hidden")):(this.refs.headerDrawerContainer.classList.add("desktop:hidden"),this.#e=null,this.refs.headerMenu.classList.remove("hidden"))}#l=()=>{const e=this.getAttribute("sticky");if(!this.#i&&"always"!==e)return;const t=document.scrollingElement?.scrollTop??0,i=t<this.#s;if(this.#n&&(clearTimeout(this.#n),this.#n=null),"always"===e){const e=this.getBoundingClientRect().top>=0;return this.dataset.scrollDirection=e?"none":i?"up":"down",void(this.#s=t)}i?(this.removeAttribute("data-animating"),this.getBoundingClientRect().top>=0?(this.#i=!1,this.dataset.stickyState="inactive",this.dataset.scrollDirection="none"):(this.dataset.stickyState="active",this.dataset.scrollDirection="up")):"active"===this.dataset.stickyState?(this.dataset.scrollDirection="none",this.setAttribute("data-animating",""),this.#n=setTimeout((()=>{this.dataset.stickyState="idle",this.removeAttribute("data-animating")}),this.#o)):(this.dataset.scrollDirection="none",this.dataset.stickyState="idle"),this.#s=t};connectedCallback(){super.connectedCallback(),this.#r.observe(this),this.addEventListener("overflowMinimum",this.#d);const e=this.getAttribute("sticky");e&&(this.#c("always"===e),"scroll-up"!==e&&"always"!==e||document.addEventListener("scroll",this.#l))}disconnectedCallback(){super.disconnectedCallback(),this.#r.disconnect(),this.#t?.disconnect(),this.removeEventListener("overflowMinimum",this.#d),document.removeEventListener("scroll",this.#l),document.body.style.setProperty("--header-height","0px")}}customElements.get("header-component")||customElements.define("header-component",HeaderComponent),onDocumentLoaded((()=>{const e=document.querySelector("#header-component"),t=document.querySelector("#header-group");if(t){const i=new ResizeObserver((()=>calculateHeaderGroupHeight(e,t))),s=t.children;for(let t=0;t<s.length;t++){const n=s[t];n!==e&&n instanceof HTMLElement&&i.observe(n)}const n=new MutationObserver((s=>{for(const n of s)if("childList"===n.type){const s=t.children;for(let t=0;t<s.length;t++){const n=s[t];n!==e&&n instanceof HTMLElement&&i.observe(n)}}}));n.observe(t,{childList:!0})}}));