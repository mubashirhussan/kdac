import{Component as e}from"@theme/component";import{debounce as t,requestIdleCallback as o}from"@theme/utilities";export class AnchoredPopoverComponent extends e{requiredRefs=["popover","trigger"];#a=async()=>{let e=this.refs.popover,t=this.refs.trigger;if(!e||!t)return;let o=t.getBoundingClientRect();e.style.setProperty("--anchor-top",`${o.top}`),e.style.setProperty("--anchor-right",`${window.innerWidth-o.right}`),e.style.setProperty("--anchor-bottom",`${window.innerHeight-o.bottom}`),e.style.setProperty("--anchor-left",`${o.left}`)};#b=t(()=>{if(this.dataset.closeOnResize){let e=this.refs.popover;e&&e.matches(":popover-open")&&e.hidePopover()}},100);connectedCallback(){super.connectedCallback();let e=this.refs.popover;e?.addEventListener("beforetoggle",e=>{this.#a(),window["open"===e.newState?"addEventListener":"removeEventListener"]("resize",this.#b)}),o(()=>{this.#a()})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.#b)}}customElements.get("anchored-popover-component")||customElements.define("anchored-popover-component",AnchoredPopoverComponent);